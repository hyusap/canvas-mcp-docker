:8080 {
    # Serve favicon without auth
    handle /favicon.ico {
        rewrite * /logo.png
        file_server {
            root /srv
        }
    }
    handle /favicon.png {
        rewrite * /logo.png
        file_server {
            root /srv
        }
    }

    @unauthorized {
        not header Authorization "Bearer {$BEARER_TOKEN}"
    }

    respond @unauthorized "Unauthorized" 401

    reverse_proxy canvas-mcp:8080
}
